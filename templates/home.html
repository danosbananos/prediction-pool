{% extends "base.html" %}

{% block title %}Prediction Pool{% endblock %}
{% block header %}Prediction Pool{% endblock %}
{% block subheader %}Predict fight outcomes &amp; compete with friends{% endblock %}

{% block user_bar %}
<a href="{{ url_for('global_settings') }}" class="settings-gear" title="Settings">&#9881;</a>
{% endblock %}

{% block content %}
<div class="card" style="margin-top: 1.5rem;">
    <div class="section-title" style="margin-top: 0;">Create a New Pool</div>
    <form method="post" action="{{ url_for('create_pool') }}">
        <label for="pool-name">Pool Name</label>
        <input type="text" name="name" id="pool-name" placeholder="e.g. Glory Heavyweight Finals 2026" required autofocus autocomplete="off">
        <button type="submit" class="btn btn-primary btn-full mt-2">Create Pool</button>
    </form>
</div>

<div class="card">
    <div class="section-title" style="margin-top: 0;">Join an Existing Pool</div>
    <p style="margin-bottom: 0.75rem;"><small class="muted">Paste the pool link you received from a friend, or enter the pool code.</small></p>
    <form onsubmit="goToPool(event)">
        <label for="pool-link">Pool Link or Code</label>
        <input type="text" id="pool-link" placeholder="Pool link or code" required>
        <button type="submit" class="btn btn-secondary btn-full mt-2">Go to Pool</button>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
function goToPool(e) {
    e.preventDefault();
    const val = document.getElementById('pool-link').value.trim();
    if (val.includes('/pool/')) {
        window.location.href = val;
    } else {
        window.location.href = '/pool/' + val;
    }
}
</script>
{% endblock %}
